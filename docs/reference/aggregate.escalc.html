<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate Multiple Effect Sizes or Outcomes Within Studies/Clusters — aggregate.escalc • metafor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Aggregate Multiple Effect Sizes or Outcomes Within Studies/Clusters — aggregate.escalc" />
<meta property="og:description" content="The function can be used to aggregate multiple effect sizes or outcomes belonging to the same study (or to the same level of some other clustering variable) into a single combined effect size or outcome." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5-57</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate Multiple Effect Sizes or Outcomes Within Studies/Clusters</h1>
    
    <div class="hidden name"><code>aggregate.escalc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function can be used to aggregate multiple effect sizes or outcomes belonging to the same study (or to the same level of some other clustering variable) into a single combined effect size or outcome.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for escalc</span>
<span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>cluster</span>, <span class='va'>V</span>, struct<span class='op'>=</span><span class='st'>"CS"</span>, <span class='va'>rho</span>, <span class='va'>fun</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span>,
          <span class='va'>subset</span>, <span class='va'>select</span>, <span class='va'>digits</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>"escalc"</code>.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>a vector to specify the clustering variable.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>optional argument to specify the variance-covariance matrix of the sampling errors. If not specified, argument <code>struct</code> is used to specify the variance-covariance structure.</p></td>
    </tr>
    <tr>
      <th>struct</th>
      <td><p>character string to specify the variance-covariance structure of the sampling errors within the same cluster (either <code>"CS"</code> or <code>"ID"</code>).</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>value of the correlation of the sampling errors within clusters when <code>struct="CS"</code>. Can also be a vector with the value of the correlation for each cluster.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>optional list with three functions for aggregating other variables besides the effect sizes or outcomes within clusters (for numeric/integer variables, for logicals, and for all other types, respectively).</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical to specify whether <code>NA</code> values should be removed before aggregating values within clusters. Can also be a vector with two logicals (the first pertains to the effect sizes or outcomes, the second to all other variables).</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>optional (logical or numeric) vector to specify the subset of rows to include when aggregating the effect sizes or outcomes.</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>optional vector to specify the names of the variables to include in the aggregated dataset.</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>integer to specify the number of decimal places to which the printed results should be rounded (the default is to take the value from the object).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In many meta-analyses, multiple effect size estimates or outcomes can be extracted from the same study. Ideally, such structures should be analyzed using an appropriate multilevel/multivariate model as can be fitted with the <code><a href='rma.mv.html'>rma.mv</a></code> function. However, there may occasionally be reasons for aggregating multiple effect sizes or outcomes belonging to the same study (or to the same level of some other clustering variable) into a single combined effect size or outcome. The present function can be used for this purpose.</p>
<p>The input must be an object of class <code>"escalc"</code>. The error &#8216;<code>Error in match.fun(FUN) : argument "FUN" is missing, with no default</code>&#8217; indicates that a regular data frame was passed to the function, but this does not work. One can turn a regular data frame (containing the effect sizes or outcomes and the corresponding sampling variances) into an <code>"escalc"</code> object with the <code><a href='escalc.html'>escalc</a></code> function. See the &#8216;Examples&#8217; below for an illustration of this.</p>
<p>The <code>cluster</code> variable is used to specify which estimates/outcomes belong to the same study/cluster.</p>
<p>In the simplest case, the estimates/outcomes within clusters (or, to be precise, their sampling errors) are assumed to be independent. This is usually a safe assumption as long as each study participant (or whatever the unit of analysis is) only contributes data to a single estimate/outcome. For example, if a study provides effect size estimates for male and female subjects separately, then the sampling errors can be assumed to be independent. In this case, one can set <code>struct="ID"</code> and multiple estimates/outcomes within the same cluster are combined using standard inverse-variance weighting under the assumption of independence.</p>
<p>In other cases, the estimates/outcomes within clusters cannot be assumed to be independent. For example, if multiple effect size estimates are computed for the same group of subjects (e.g., for different dependent variables or multiple time points), then the estimates are likely to be correlated. If the actual correlation between the estimates is unknown, one can often still make an educated guess, set argument <code>rho</code> to this value, which is then assumed to be the same for all pairs of estimates within clusters (when <code>struct="CS"</code>). Multiple estimates/outcomes within the same cluster are then combined using inverse-variance weighting taking their correlation into consideration. One can also specify a different value of <code>rho</code> for each cluster by passing a vector (of the same length as the number of clusters) to this argument.</p>
<p>Finally, if one actually knows the correlation (and hence the covariance) between each pair of estimates, one can also specify the entire variance-covariance matrix of the estimates (or more precisely, their sampling errors) via the <code>V</code> argument. In this case, arguments <code>rho</code> and <code>struct</code> are ignored.</p>
<p>Other variables (besides the estimates) will also be aggregated to the cluster level. By default, numeric/integer type variables are averaged, logicals are also averaged (yielding the proportion of <code>TRUE</code> values), and for all other types of variables (e.g., character variables or factors) the most frequent category/level is returned. One can also specify a list of three functions via the <code>fun</code> argument for aggregating these three variable types.</p>
<p>Argument <code>na.rm</code> controls how missing values should be handled. By default, any missing estimates are first removed before aggregating the non-missing values within each cluster. The same applies when aggregating the other variables. One can also specify a vector with two logicals for the <code>na.rm</code> argument to control how missing values should be handled when aggregating the estimates and when aggregating all other variables.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code><a href='https://rdrr.io/r/base/c.html'>c("escalc","data.frame")</a></code> that contains the (selected) variables aggregated to the cluster level.</p>
<p>The object is formatted and printed with the <code><a href='print.escalc.html'>print.escalc</a></code> function.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Wolfgang Viechtbauer <a href='mailto:wvb@metafor-project.org'>wvb@metafor-project.org</a> <a href='http://www.metafor-project.org'>http://www.metafor-project.org</a></p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1--48. <a href='https://doi.org/10.18637/jss.v036.i03'>https://doi.org/10.18637/jss.v036.i03</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='escalc.html'>escalc</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### copy data into 'dat' and examine data</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat.konstantopoulos2011</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;    district school study year     yi    vi 
#&gt; 1        11      1     1 1976 -0.180 0.118 
#&gt; 2        11      2     2 1976 -0.220 0.118 
#&gt; 3        11      3     3 1976  0.230 0.144 
#&gt; 4        11      4     4 1976 -0.300 0.144 
#&gt; 5        12      1     5 1989  0.130 0.014 
#&gt; 6        12      2     6 1989 -0.260 0.014 
#&gt; 7        12      3     7 1989  0.190 0.015 
#&gt; 8        12      4     8 1989  0.320 0.024 
#&gt; 9        18      1     9 1994  0.450 0.023 
#&gt; 10       18      2    10 1994  0.380 0.043 
#&gt; 11       18      3    11 1994  0.290 0.012 
#&gt; 12       27      1    12 1976  0.160 0.020 
#&gt; 13       27      2    13 1976  0.650 0.004 
#&gt; 14       27      3    14 1976  0.360 0.004 
#&gt; 15       27      4    15 1976  0.600 0.007 
#&gt; 16       56      1    16 1997  0.080 0.019 
#&gt; 17       56      2    17 1997  0.040 0.007 
#&gt; 18       56      3    18 1997  0.190 0.005 
#&gt; 19       56      4    19 1997 -0.060 0.004 
#&gt; 20       58      1    20 1976 -0.180 0.020 
#&gt; 21       58      2    21 1976  0.000 0.018 
#&gt; 22       58      3    22 1976  0.000 0.019 
#&gt; 23       58      4    23 1976 -0.280 0.022 
#&gt; 24       58      5    24 1976 -0.040 0.020 
#&gt; 25       58      6    25 1976 -0.300 0.021 
#&gt; 26       58      7    26 1976  0.070 0.006 
#&gt; 27       58      8    27 1976  0.000 0.007 
#&gt; 28       58      9    28 1976  0.050 0.007 
#&gt; 29       58     10    29 1976 -0.080 0.007 
#&gt; 30       58     11    30 1976 -0.090 0.007 
#&gt; 31       71      1    31 1997  0.300 0.015 
#&gt; 32       71      2    32 1997  0.980 0.011 
#&gt; 33       71      3    33 1997  1.190 0.010 
#&gt; 34       86      1    34 1997 -0.070 0.001 
#&gt; 35       86      2    35 1997 -0.050 0.001 
#&gt; 36       86      3    36 1997 -0.010 0.001 
#&gt; 37       86      4    37 1997  0.020 0.001 
#&gt; 38       86      5    38 1997 -0.030 0.001 
#&gt; 39       86      6    39 1997  0.000 0.001 
#&gt; 40       86      7    40 1997  0.010 0.001 
#&gt; 41       86      8    41 1997 -0.100 0.001 
#&gt; 42       91      1    42 2000  0.500 0.010 
#&gt; 43       91      2    43 2000  0.660 0.011 
#&gt; 44       91      3    44 2000  0.200 0.010 
#&gt; 45       91      4    45 2000  0.000 0.009 
#&gt; 46       91      5    46 2000  0.050 0.013 
#&gt; 47       91      6    47 2000  0.070 0.013 
#&gt; 48      108      1    48 2000 -0.520 0.031 
#&gt; 49      108      2    49 2000  0.700 0.031 
#&gt; 50      108      3    50 2000 -0.030 0.030 
#&gt; 51      108      4    51 2000  0.270 0.030 
#&gt; 52      108      5    52 2000 -0.340 0.030 
#&gt; 53      644      1    53 1995  0.120 0.087 
#&gt; 54      644      2    54 1995  0.610 0.082 
#&gt; 55      644      3    55 1994  0.040 0.067 
#&gt; 56      644      4    56 1994 -0.050 0.067 </div><div class='input'>
<span class='co'>### aggregate estimates to the district level, assuming independent sampling</span>
<span class='co'>### errors for multiples studies/schools within the same district</span>
<span class='va'>agg</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>dat</span>, cluster<span class='op'>=</span><span class='va'>district</span>, struct<span class='op'>=</span><span class='st'>"ID"</span><span class='op'>)</span>
<span class='va'>agg</span>
</div><div class='output co'>#&gt;     district school study   year     yi    vi 
#&gt; 11        11    2.5   2.5 1976.0 -0.126 0.032 
#&gt; 12        12    2.5   6.5 1989.0  0.067 0.004 
#&gt; 18        18    2.0  10.0 1994.0  0.350 0.007 
#&gt; 27        27    2.5  13.5 1976.0  0.500 0.001 
#&gt; 56        56    2.5  17.5 1997.0  0.051 0.002 
#&gt; 58        58    6.0  25.0 1976.0 -0.042 0.001 
#&gt; 71        71    2.0  32.0 1997.0  0.886 0.004 
#&gt; 86        86    4.5  37.5 1997.0 -0.029 0.000 
#&gt; 91        91    3.5  44.5 2000.0  0.250 0.002 
#&gt; 108      108    3.0  50.0 2000.0  0.015 0.006 
#&gt; 644      644    2.5  54.5 1994.5  0.162 0.019 </div><div class='input'>
<span class='co'>### copy data into 'dat' and examine data</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat.assink2016</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;     study esid  id      yi     vi pubstatus  year deltype
#&gt; 1       1    1   1  0.9066 0.0740         1   4.5 general
#&gt; 2       1    2   2  0.4295 0.0398         1   4.5 general
#&gt; 3       1    3   3  0.2679 0.0481         1   4.5 general
#&gt; 4       1    4   4  0.2078 0.0239         1   4.5 general
#&gt; 5       1    5   5  0.0526 0.0331         1   4.5 general
#&gt; 6       1    6   6 -0.0507 0.0886         1   4.5 general
#&gt; 7       2    1   7  0.5117 0.0115         1   1.5 general
#&gt; 8       2    2   8  0.4738 0.0076         1   1.5 general
#&gt; 9       2    3   9  0.3544 0.0065         1   1.5 general
#&gt; 10      3    1  10  2.2844 0.3325         1  -8.5 general
#&gt; 11      3    2  11  2.1771 0.3073         1  -8.5 general
#&gt; 12      3    3  12  1.7777 0.2697         1  -8.5 general
#&gt; 13      3    4  13  1.5480 0.4533         1  -8.5 general
#&gt; 14      3    5  14  1.4855 0.1167         1  -6.5 general
#&gt; 15      3    6  15  1.4836 0.1706         1  -6.5 general
#&gt; 16      3    7  16  1.2777 0.1538         1  -8.5 general
#&gt; 17      3    8  17  1.0311 0.3132         1  -8.5 general
#&gt; 18      3    9  18  0.9409 0.1487         1  -6.5 general
#&gt; 19      3   10  19  0.6263 0.2139         1  -6.5 general
#&gt; 20      4    1  20 -0.0447 0.0331         1  -7.5 general
#&gt; 21      5    1  21  1.5490 0.1384         1 -11.5 general
#&gt; 22      6    1  22  0.7516 0.0477         1   5.5 general
#&gt; 23      6    2  23  0.3979 0.0449         1   5.5 general
#&gt; 24      6    3  24  0.2062 0.3533         1   5.5 general
#&gt; 25      6    4  25 -0.2927 0.0758         1   5.5 general
#&gt; 26      6    5  26 -0.5067 0.0314         1   5.5 general
#&gt; 27      7    1  27  1.7083 0.0729         1   3.5 general
#&gt; 28      7    2  28  0.8003 0.0815         1   3.5 general
#&gt; 29      7    3  29  0.7268 0.1394         1   3.5 general
#&gt; 30      7    4  30  0.6569 0.0943         1   3.5 general
#&gt; 31      7    5  31  0.5569 0.1355         1   3.5 general
#&gt; 32      7    6  32  0.3504 0.0763         1   3.5 general
#&gt; 33      8    1  33  0.3695 0.0199         1   1.5 general
#&gt; 34      9    1  34  0.1048 0.0331         1   5.5 general
#&gt; 35      9    2  35  0.1748 0.0346         1   5.5 general
#&gt; 36     10    1  36  0.4549 0.0278         1   4.5 general
#&gt; 37     10    2  37  0.3161 0.0185         1   4.5 general
#&gt; 38     10    3  38  0.0826 0.0328         1   4.5 general
#&gt; 39     10    4  39  0.0221 0.0612         1   4.5 general
#&gt; 40     10    5  40 -0.0199 0.0127         1   4.5 general
#&gt; 41     11    1  41  2.3580 0.1226         0  -6.5 general
#&gt; 42     11    2  42  2.3580 0.1226         0  -6.5 general
#&gt; 43     11    3  43  2.3157 0.2416         0  -6.5 general
#&gt; 44     11    4  44  2.0765 0.0844         0  -6.5 general
#&gt; 45     11    5  45  2.0034 0.0780         0  -6.5 general
#&gt; 46     11    6  46  1.7716 0.0723         0  -6.5 general
#&gt; 47     11    7  47  1.4918 0.0701         0  -6.5 general
#&gt; 48     11    8  48  1.4476 0.0422         0  -6.5 general
#&gt; 49     11    9  49  1.2897 0.0663         0  -6.5   overt
#&gt; 50     11   10  50  1.2637 0.0935         0  -6.5   overt
#&gt; 51     11   11  51  1.2423 0.0392         0  -6.5 general
#&gt; 52     11   12  52  1.1769 0.0387         0  -6.5 general
#&gt; 53     11   13  53  1.0760 0.0391         0  -6.5 general
#&gt; 54     11   14  54  1.0653 0.0380         0  -6.5   overt
#&gt; 55     11   15  55  1.0379 0.1651         0  -6.5 general
#&gt; 56     11   16  56  1.0101 0.0586         0  -6.5   overt
#&gt; 57     11   17  57  1.0087 0.0386         0  -6.5   overt
#&gt; 58     11   18  58  0.8765 0.0893         0  -6.5 general
#&gt; 59     11   19  59  0.8615 0.1591         0  -6.5   overt
#&gt; 60     11   20  60  0.8531 0.0350         0  -6.5 general
#&gt; 61     11   21  61  0.6999 0.0353         0  -6.5 general
#&gt; 62     11   22  62  0.6947 0.0353         0  -6.5 general
#&gt; 63     12    1  63  0.2994 0.0041         0   4.5   overt
#&gt; 64     12    2  64  0.2992 0.0042         0   4.5 general
#&gt; 65     12    3  65  0.2989 0.0041         0   4.5   overt
#&gt; 66     12    4  66  0.2910 0.0042         0   4.5   overt
#&gt; 67     12    5  67  0.2170 0.0041         0   4.5   overt
#&gt; 68     13    1  68  0.3874 0.0138         1  -3.5 general
#&gt; 69     13    2  69  0.2178 0.0137         1  -3.5 general
#&gt; 70     14    1  70  0.4571 0.0100         1  -1.5 general
#&gt; 71     14    2  71  0.1947 0.0059         1  -1.5 general
#&gt; 72     14    3  72  0.0239 0.0025         1  -1.5 general
#&gt; 73     14    4  73 -0.0575 0.0032         1  -1.5 general
#&gt; 74     14    5  74 -0.1190 0.0789         1  -1.5 general
#&gt; 75     14    6  75 -0.2945 0.0179         1  -1.5 general
#&gt; 76     15    1  76  0.7130 0.1537         1 -13.5 general
#&gt; 77     15    2  77  0.3990 0.2334         1 -13.5 general
#&gt; 78     15    3  78 -0.7645 0.1674         1 -13.5 general
#&gt; 79     16    1  79  0.7156 0.0914         1   2.5   overt
#&gt; 80     16    2  80  0.7067 0.0875         1   2.5  covert
#&gt; 81     16    3  81  0.6475 0.0330         1   2.5 general
#&gt; 82     16    4  82  0.6428 0.0861         1   2.5  covert
#&gt; 83     16    5  83  0.6271 0.0400         1   2.5 general
#&gt; 84     16    6  84  0.6238 0.0680         1   2.5 general
#&gt; 85     16    7  85  0.6025 0.1287         1   2.5   overt
#&gt; 86     16    8  86  0.5763 0.0332         1   2.5 general
#&gt; 87     16    9  87  0.5171 0.0517         1   2.5  covert
#&gt; 88     16   10  88 -0.3797 0.0390         1   2.5  covert
#&gt; 89     16   11  89 -0.4228 0.0664         1   2.5  covert
#&gt; 90     16   12  90 -0.4245 0.0809         1   2.5  covert
#&gt; 91     16   13  91 -0.4671 0.0667         1   2.5  covert
#&gt; 92     16   14  92 -0.5230 0.0988         1   2.5   overt
#&gt; 93     16   15  93 -0.5675 0.0340         1   2.5  covert
#&gt; 94     16   16  94 -0.7586 0.0437         1   2.5  covert
#&gt; 95     17    1  95  0.3453 0.0340         1   5.5 general
#&gt; 96     17    2  96  0.1221 0.0158         1   5.5 general
#&gt; 97     17    3  97  0.0906 0.0107         1   5.5 general
#&gt; 98     17    4  98  0.0040 0.0208         1   5.5 general
#&gt; 99     17    5  99 -0.0207 0.0123         1   5.5 general
#&gt; 100    17    6 100 -0.0660 0.0100         1   5.5 general</div><div class='input'>
<span class='co'>### note: 'dat' is a regular data frame</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "data.frame"</div><div class='input'>
<span class='co'>### turn data frame into an 'escalc' object</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='escalc.html'>escalc</a></span><span class='op'>(</span>yi<span class='op'>=</span><span class='va'>yi</span>, vi<span class='op'>=</span><span class='va'>vi</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "escalc"     "data.frame"</div><div class='input'>
<span class='co'>### aggregate the estimates to the study level, assuming a CS structure for</span>
<span class='co'>### the sampling errors within studies with a correlation of 0.6</span>
<span class='va'>agg</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>dat</span>, cluster<span class='op'>=</span><span class='va'>study</span>, rho<span class='op'>=</span><span class='fl'>0.6</span><span class='op'>)</span>
<span class='va'>agg</span>
</div><div class='output co'>#&gt;    study esid   id      yi     vi pubstatus  year deltype 
#&gt; 1      1  3.5  3.5  0.1629 0.0197         1   4.5 general 
#&gt; 2      2  2.0  8.0  0.4060 0.0056         1   1.5 general 
#&gt; 3      3  5.5 14.5  1.0790 0.0832         1  -7.7 general 
#&gt; 4      4  1.0 20.0 -0.0447 0.0331         1  -7.5 general 
#&gt; 5      5  1.0 21.0  1.5490 0.1384         1 -11.5 general 
#&gt; 6      6  3.0 24.0 -0.0550 0.0214         1   5.5 general 
#&gt; 7      7  3.5 29.5  1.0072 0.0545         1   3.5 general 
#&gt; 8      8  1.0 33.0  0.3695 0.0199         1   1.5 general 
#&gt; 9      9  1.5 34.5  0.1379 0.0271         1   5.5 general 
#&gt; 10    10  3.0 38.0  0.1167 0.0107         1   4.5 general 
#&gt; 11    11 11.5 51.5  0.5258 0.0114         0  -6.5 general 
#&gt; 12    12  3.0 65.0  0.2805 0.0028         0   4.5   overt 
#&gt; 13    13  1.5 68.5  0.3018 0.0110         1  -3.5 general 
#&gt; 14    14  3.5 72.5  0.0356 0.0014         1  -1.5 general 
#&gt; 15    15  2.0 77.0  0.0908 0.1269         1 -13.5 general 
#&gt; 16    16  8.5 86.5  0.0181 0.0169         1   2.5  covert 
#&gt; 17    17  3.5 97.5 -0.0552 0.0072         1   5.5 general </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


